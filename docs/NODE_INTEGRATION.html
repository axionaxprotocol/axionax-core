<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Axionax – Node Integration Guide</title>
    <meta name="description" content="Axionax node integration: how to run, configure, publish, and monitor blockchain nodes using Rust API and JSON-RPC.">
    <link rel="canonical" href="./NODE_INTEGRATION.html" />
    <meta property="og:title" content="Axionax – Node Integration Guide">
    <meta property="og:description" content="Overview of AxionaxNode struct, configuration, network/state/RPC integration, stats querying, publishing blocks, and error handling.">
    <meta property="og:type" content="article"/>
    <meta property="og:url" content="./NODE_INTEGRATION.html" />
    <meta property="og:image" content="../assets/og-image.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.1.0/github-markdown.min.css">
    <style>
        main.markdown-body {
            max-width: 980px;
            margin: 0 auto;
            padding: 45px;
            background: #fff;
            color: #23272f;
        }
        .code-block { background:#f3f6fa; border-radius:6px; padding:16px; font-size:0.97em; margin:1em 0; }
        ul, ol { margin-bottom: 1.2em; }
        table { border-collapse: collapse; margin: 16px 0; width: 100% }
        th,td{padding:8px;text-align:left}
    </style>
</head>
<body>
<main class="markdown-body" aria-label="Node Integration Guide">
    <h1>Node Integration Guide</h1>
    <section>
        <h2>Overview</h2>
        <ul>
            <li>Status: <b>✅ Complete</b></li>
            <li>Version: <b>v1.6.0-dev</b></li>
            <li>Date: <b>October 26, 2025</b></li>
        </ul>
        <p>Node module integrates core <b>Network Layer</b> (libp2p), <b>State Management</b> (RocksDB), <b>RPC Server</b> (JSON-RPC 2.0)</p>
    </section>
    <section>
        <h2>Architecture</h2>
        <div class="code-block"><pre><code>┌─────────────────────────────────────────────────┐
│            AxionaxNode                           │
│                                                  │
│  ┌──────────────┐  ┌──────────────┐  ┌────────┐│
│  │ NetworkManager│  │   StateDB    │  │  RPC   ││
│  │   (libp2p)   │  │  (RocksDB)   │  │ Server ││
│  └───────┬──────┘  └──────┬───────┘  └───┬────┘│
│          │                │               │     │
│          │    Sync Task   │               │     │
│          └────────────────┘               │     │
│                                           │     │
└───────────────────────────────────────────┼─────┘
                                            │
                                     JSON-RPC API
                                      (port 8545)
</code></pre></div>
    </section>
    <section>
        <h2>AxionaxNode Struct</h2>
        <div class="code-block"><pre><code>pub struct AxionaxNode {
    config: NodeConfig,
    network: Arc<RwLock<NetworkManager>>,
    state: Arc<StateDB>,
    stats: Arc<RwLock<NodeStats>>,
    rpc_handle: Option<ServerHandle>,
    sync_handle: Option<JoinHandle<()>>,
}</code></pre></div>
        <p>Node configuration, presets, and statistics available.</p>
    </section>
    <section>
        <h2>Basic Node Setup (Rust API)</h2>
        <div class="code-block"><pre><code>use node::{AxionaxNode, NodeConfig};
#[tokio::main]
async fn main() -> anyhow::Result<()> {
    let mut config = NodeConfig::dev();
    config.state_path = "/tmp/axionax-node".to_string();
    config.rpc_addr = "127.0.0.1:8545".parse()?;
    let mut node = AxionaxNode::new(config).await?;
    node.start().await?;
    Ok(())
}</code></pre></div>
    </section>
    <section>
        <h2>Publishing Blocks/Transactions</h2>
        <div class="code-block"><pre><code>// Publish block
node.state().store_block(&block)?;
node.publish_block(&block).await?;
// Publish transaction
node.publish_transaction(&tx).await?;
</code></pre></div>
    </section>
    <section>
        <h2>Querying Node State</h2>
        <div class="code-block"><pre><code>let stats = node.stats().await;
printf!("Blocks stored: {}", stats.blocks_stored);
printf!("Peers connected: {}", node.peer_count().await);
let height = node.state().get_chain_height()?;
let latest_block = node.state().get_latest_block()?;
</code></pre></div>
    </section>
    <section>
        <h2>RPC Example</h2>
        <div class="code-block"><pre><code># Get block via RPC
curl -X POST http://127.0.0.1:8545 \
  -H 'Content-Type: application/json' \
  -d '{"jsonrpc":"2.0","method":"eth_getBlockByNumber","params":["latest",false],"id":1}'
</code></pre></div>
    </section>
    <section>
        <h2>Performance & Resource Usage</h2>
        <ul>
            <li><b>Block Processing:</b> ~200 μs per block</li>
            <li><b>Transaction Processing:</b> ~40 μs per tx</li>
            <li><b>RPC Requests:</b> ~5,000 req/s (single core)</li>
            <li><b>P2P Messages:</b> ~10,000 msg/s (libp2p)</li>
        </ul>
    </section>
    <section>
        <h2>Error Handling</h2>
        <p>All errors returned as JSON-RPC error objects (error code, message, id).</p>
        <div class="code-block"><pre><code>{
  "jsonrpc": "2.0",
  "error": {
    "code": -32001,
    "message": "Block not found"
  },
  "id": 1
}</code></pre></div>
    </section>
    <section>
        <h2>Future Enhancements</h2>
        <ul>
            <li>Full event-driven sync</li>
            <li>Mempool and advanced validation</li>
            <li>Peer reputation, bandwidth management</li>
            <li>Prometheus metrics and monitoring</li>
        </ul>
    </section>
    <section>
        <h2>Security Considerations</h2>
        <ul>
            <li>RPC binds localhost by default</li>
            <li>libp2p Noise protocol encryption</li>
            <li>Strict hex validation</li>
            <li>Production rate limiting: TODO</li>
        </ul>
    </section>
    <footer>
        <p>Rendered from <code>NODE_INTEGRATION.html</code> — Last updated Oct 2025 — <a href="index.html">Axionax</a></p>
    </footer>
</main>
</body>
</html>
